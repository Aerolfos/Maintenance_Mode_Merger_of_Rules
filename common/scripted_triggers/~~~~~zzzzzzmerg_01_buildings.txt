# Vanilla scripted triggers from 01_scripted_triggers_buildings.txt

has_upgraded_capital = {
	if = {
		limit = { has_modifier = penal_colony }
		has_upgraded_penal_capital = yes
	}
	else_if = {
		limit = { has_modifier = resort_colony }
		custom_tooltip = {
			fail_text = "requires_building_resort_capital"
			OR = {
				has_building = building_resort_capital
				has_building = building_resort_major_capital
				has_building = building_ancient_palace
				# ACOT
				inline_script = {
					script = merger_of_rules/toggled_code
					code = "
						has_building = building_acot_dm_ancient_palace
						has_building = building_acot_ae_ancient_palace
						has_building = building_phanon_tower
						has_building = building_acot_ruined_giga_fortress
					"
					toggle = @has_ancient_caches
				}
				# ACOT SBTG
				has_sbtg_upgraded_capital = yes
				# AOT
				inline_script = {
					script = merger_of_rules/toggled_code
					code = "
						has_building = building_stellarite_palace
						has_building = building_phanon_palace
					"
					toggle = @has_acquisition_of_tech
				}
				# AVB
				inline_script = {
					script = merger_of_rules/toggled_code
					code = "
						has_building = building_avb_resort_capital_3
					"
					toggle = @has_avb_mod
				}
				# EDA
				inline_script = {
					script = merger_of_rules/toggled_code
					code = "
						has_building = eda_building_imperial_capital
					"
					toggle = @eda_mod
				}
				# Star Wars: Kuat Ancient Empire
				inline_script = {
					script = merger_of_rules/toggled_code
					code = "
						has_building = building_kuat_command_center
					"
					toggle = @sw_kuat_mod
				}
				# Twinks Atlantean
				has_building = building_ancient_palace_at
				# Eternal Empire
				inline_script = {
					script = merger_of_rules/toggled_code
					code = "
						has_building = building_eternal_palace
					"
					toggle = @has_eternal_empire
				}
				# Twinks Kaldorei
				has_building = building_nightelf_palace
				# Special Colonies Overhaul
				has_building = building_SCO_resort_system_capital
				# ZOFE
				has_building = building_fallen_palace
				has_building = building_fallen_ancient_palace
			}
		}
	}
	else_if = {
		limit = { has_modifier = slave_colony }
		custom_tooltip = {
			fail_text = "requires_building_slave_capital"
			OR = {
				has_building = building_slave_capital
				has_building = building_slave_major_capital
				has_building = building_ancient_palace
				# ACOT
				inline_script = {
					script = merger_of_rules/toggled_code
					code = "
						has_building = building_acot_dm_ancient_palace
						has_building = building_acot_ae_ancient_palace
						has_building = building_phanon_tower
						has_building = building_acot_ruined_giga_fortress
					"
					toggle = @has_ancient_caches
				}
				# ACOT SBTG
				has_sbtg_upgraded_capital = yes
				# AOT
				inline_script = {
					script = merger_of_rules/toggled_code
					code = "
						has_building = building_stellarite_palace
						has_building = building_stellarite_control_center
						has_building = building_stellarite_hive_cluster
						has_building = building_phanon_palace
					"
					toggle = @has_acquisition_of_tech
				}
				# AVB
				inline_script = {
					script = merger_of_rules/toggled_code
					code = "
						has_building = building_avb_slave_capital_3
					"
					toggle = @has_avb_mod
				}
				# EDA
				inline_script = {
					script = merger_of_rules/toggled_code
					code = "
						has_building = eda_building_imperial_capital
					"
					toggle = @eda_mod
				}
				# Star Wars: Kuat Ancient Empire
				inline_script = {
					script = merger_of_rules/toggled_code
					code = "
						has_building = building_kuat_command_center
					"
					toggle = @sw_kuat_mod
				}
				# Twinks Atlantean
				has_building = building_ancient_palace_at
				# Eternal Empire
				inline_script = {
					script = merger_of_rules/toggled_code
					code = "
						has_building = building_eternal_palace
					"
					toggle = @has_eternal_empire
				}
				# Twinks Kaldorei
				has_building = building_nightelf_palace
				# Special Colonies Overhaul
				has_building = building_SCO_slave_system_capital
				# ZOFE
				has_building = building_fallen_palace
				has_building = building_fallen_ancient_palace
			}
		}
	}
	else_if = {
		limit = { uses_habitat_capitals = yes }
		custom_tooltip = {
			fail_text = "requires_building_hab_capital"
			OR = {
				has_building = building_hab_capital
				has_building = building_hab_major_capital
				has_building = building_hab_system_capital
				has_building = building_imperial_capital
				has_building = building_imperial_machine_capital
				has_building = building_imperial_hive_capital
				has_building = building_hab_fe_capital
				has_building = building_hab_fe_capital
				# ACOT / AOT / ZOFE
				inline_script = {
					script = merger_of_rules/toggled_code
					code = "
						has_building = building_acot_dm_ancient_palace
						has_building = building_acot_ae_ancient_palace
						has_building = building_phanon_tower
						has_building = building_acot_ruined_giga_fortress
						has_building = building_acot_dm_ancient_hive_cluster
						has_building = building_acot_ae_ancient_hive_cluster
						has_building = building_acot_dm_ancient_control_center
						has_building = building_acot_ae_ancient_control_center
						has_building = building_acot_ruined_giga_fortress
					"
					toggle = @has_ancient_caches
				}
				# ACOT SBTG
				has_sbtg_upgraded_capital = yes
				# AOT
				inline_script = {
					script = merger_of_rules/toggled_code
					code = "
						has_building = building_stellarite_palace
						has_building = building_stellarite_control_center
						has_building = building_stellarite_hive_cluster
						has_building = building_phanon_palace
						has_building = building_phanon_hive_cluster
						has_building = building_phanon_control_center
					"
					toggle = @has_acquisition_of_tech
				}
				# AVB
				inline_script = {
					script = merger_of_rules/toggled_code
					code = "
						has_building = building_avb_hab_capital_4
					"
					toggle = @has_avb_mod
				}
				# Dawn of the Republic
				has_building = building_galactic_senate
				# EDA
				inline_script = {
					script = merger_of_rules/toggled_code
					code = "
						has_building = eda_building_imperial_capital
					"
					toggle = @eda_mod
				}
				# More Cosmogenesis Buildings
				has_building = building_hab_cosmo_capital
				# Star Wars: Kuat Ancient Empire
				inline_script = {
					script = merger_of_rules/toggled_code
					code = "
						has_building = building_kuat_command_center
					"
					toggle = @sw_kuat_mod
				}
				# Superstates
				inline_script = {
					script = merger_of_rules/toggled_code
					code = "
						has_building = building_central_citadel
						has_building = building_simple_citadel
						has_building = building_cmachine
						has_building = building_grand_dvorets
						has_building = building_just_dvorets
						has_building = building_csenatec
						has_building = building_cgranhq
						has_building = building_bugfables
						has_building = building_cspire
						has_building = building_cfcouncil
						has_building = building_ccathedral
						has_building = building_seccouncilc
						has_building = building_centrehq
						has_building = building_git
						has_building = building_divsanct
						has_building = building_piratecovess
						has_building = building_martlet
						has_building = building_czenith
						has_building = building_cbananas
					"
					toggle = @has_superstates
				}
				# Twinks Atlantean
				has_building = building_ancient_palace_at
				# Twinks Kaldorei
				has_building = building_nightelf_palace
				# Eternal Empire
				inline_script = {
					script = merger_of_rules/toggled_code
					code = "
						has_building = building_eternal_palace
						has_building = building_eternal_nexus_ai
					"
					toggle = @has_eternal_empire
				}
				# Wula Fallen Empire
				inline_script = {
					script = merger_of_rules/toggled_code
					code = "
						has_building = building_wula_archive
						has_building = building_all_is_dust
						has_building = building_wula_order_keep
						has_building = building_wula_gene_bank
					"
					toggle = @wula_compatch_var
				}
			}
		}
	}
	# Real Space - Planetary Stations
	else_if = {
		limit = { has_planet_flag = planetary_station }
		custom_tooltip = {
			inline_script = {
				script = merger_of_rules/toggled_code
				code = "
					fail_text = requires_building_planetary_station_capital
				"
				toggle = @rs_compatch_var
			}
			OR = {
				has_building = building_hab_fe_capital
				inline_script = {
					script = merger_of_rules/toggled_code
					code = "
						has_building = building_station_capital
						has_building = building_station_major_capital
						has_building = building_station_fe_capital
						has_building = building_station_system_capital
						has_building = building_prison_capital
						has_building = building_prison_major_capital
						has_building = building_prison_system_capital
					"
					toggle = @rs_compatch_var
				}
				# ACOT
				inline_script = {
					script = merger_of_rules/toggled_code
					code = "
						has_building = building_acot_dm_ancient_palace
						has_building = building_acot_ae_ancient_palace
						has_building = building_acot_dm_ancient_hive_cluster
						has_building = building_acot_ae_ancient_hive_cluster
						has_building = building_acot_dm_ancient_control_center
						has_building = building_acot_ae_ancient_control_center
						has_building = building_phanon_tower
						has_building = building_acot_ruined_giga_fortress
					"
					toggle = @has_ancient_caches
				}
				# AOT
				inline_script = {
					script = merger_of_rules/toggled_code
					code = "
						has_building = building_stellarite_palace
						has_building = building_stellarite_control_center
						has_building = building_stellarite_hive_cluster
						has_building = building_phanon_palace
						has_building = building_phanon_hive_cluster
						has_building = building_phanon_control_center
					"
					toggle = @has_acquisition_of_tech
				}
				# ACOT SBTG
				has_sbtg_upgraded_capital = yes
				# More Cosmogenesis Buildings
				has_building = building_hab_cosmo_capital
				# Eternal Empire
				inline_script = {
					script = merger_of_rules/toggled_code
					code = "
						has_building = building_eternal_palace
						has_building = building_eternal_nexus_ai
					"
					toggle = @has_eternal_empire
				}
			}
		}
	}
	# Vanilla
	else_if = {
		limit = { owner = { is_hive_empire = yes } }
		custom_tooltip = {
			fail_text = "requires_building_hive_capital"
			OR = {
				has_building = building_hive_capital
				has_building = building_hive_major_capital
				has_building = building_imperial_hive_capital
				# ACOT / AOT / ZOFE
				inline_script = {
					script = merger_of_rules/toggled_code
					code = "
						has_building = building_acot_dm_ancient_hive_cluster
						has_building = building_acot_ae_ancient_hive_cluster
						has_building = building_phanon_tower
						has_building = building_acot_ruined_giga_fortress
					"
					toggle = @has_ancient_caches
				}
				# ACOT SBTG
				has_sbtg_upgraded_capital = yes
				# All That Is GRIMDARK
				has_building = building_hive_major_capital_sick
				# AOT
				inline_script = {
					script = merger_of_rules/toggled_code
					code = "
						has_building = building_stellarite_hive_cluster
						has_building = building_phanon_hive_cluster
						has_building = building_ancient_hive_capital
					"
					toggle = @has_acquisition_of_tech
				}
				# AVB
				inline_script = {
					script = merger_of_rules/toggled_code
					code = "
						has_building = building_avb_hive_capital_3
						has_building = building_avb_hive_capital_4
					"
					toggle = @has_avb_mod
				}
				# EDA
				inline_script = {
					script = merger_of_rules/toggled_code
					code = "
						has_building = eda_building_imperial_capital
					"
					toggle = @eda_mod
				}
				# galacot
				has_building = building_stellarite_galactic_hive_capital
				# Gigastructural Engineering & More
				inline_script = {
					script = merger_of_rules/toggled_code
					code = "
						has_building = building_giga_elysium_host_hive_major_capital
					"
					toggle = @has_gigastructures
				}
				# More Cosmogenesis Buildings
				has_building = building_cosmo_hive_capital
				# Star Wars: Kuat Ancient Empire
				inline_script = {
					script = merger_of_rules/toggled_code
					code = "
						has_building = building_kuat_command_center
					"
					toggle = @sw_kuat_mod
				}
				# Superstates
				inline_script = {
					script = merger_of_rules/toggled_code
					code = "
						has_building = building_bugfables
					"
					toggle = @has_superstates
				}
			}
		}
	}
	else_if = {
		limit = { owner = { is_machine_empire = yes } }
		custom_tooltip = {
			fail_text = "requires_building_machine_capital"
			OR = {
				has_building = building_machine_capital
				has_building = building_machine_major_capital
				has_building = building_machine_system_capital
				has_building = building_imperial_machine_capital
				has_building = building_ancient_control_center
				# ACOT
				inline_script = {
					script = merger_of_rules/toggled_code
					code = "
						has_building = building_acot_dm_ancient_control_center
						has_building = building_acot_ae_ancient_control_center
						has_building = building_phanon_tower
						has_building = building_acot_ruined_giga_fortress
					"
					toggle = @has_ancient_caches
				}
				# ACOT SBTG
				has_sbtg_upgraded_capital = yes
				# AOT
				inline_script = {
					script = merger_of_rules/toggled_code
					code = "
						has_building = building_stellarite_control_center
						has_building = building_phanon_control_center
					"
					toggle = @has_acquisition_of_tech
				}
				# AVB
				inline_script = {
					script = merger_of_rules/toggled_code
					code = "
						has_building = building_avb_machine_capital_4
						has_building = building_avb_machine_capital_5
						has_building = building_avb_machine_capital_6
					"
					toggle = @has_avb_mod
				}
				# EDA
				inline_script = {
					script = merger_of_rules/toggled_code
					code = "
						has_building = eda_building_imperial_capital
					"
					toggle = @eda_mod
				}
				# Empires Expanded
				inline_script = {
					script = merger_of_rules/toggled_code
					code = "
						has_building = building_bok_capital_1
						has_building = building_bok_capital_2
						has_building = building_bok_capital_3
					"
					toggle = @has_emex_mod
				}
				# galacot
				has_building = building_stellarite_galactic_machine_capital
				# Gigastructural Engineering & More
				inline_script = {
					script = merger_of_rules/toggled_code
					code = "
						has_building = building_giga_elysium_host_machine_major_capital
					"
					toggle = @has_gigastructures
				}
				# More Cosmogenesis Buildings
				has_building = building_cosmo_machine_capital
				# Star Wars: Kuat Ancient Empire
				inline_script = {
					script = merger_of_rules/toggled_code
					code = "
						has_building = building_kuat_command_center
					"
					toggle = @sw_kuat_mod
				}
				# Superstates
				inline_script = {
					script = merger_of_rules/toggled_code
					code = "
						has_building = building_central_citadel
						has_building = building_simple_citadel
						has_building = building_cmachine
						has_building = building_martlet
					"
					toggle = @has_superstates
				}
				# Eternal Empire
				inline_script = {
					script = merger_of_rules/toggled_code
					code = "
						has_building = building_eternal_palace
					"
					toggle = @has_eternal_empire
				}
			}
		}
	}
	else = {
		custom_tooltip = {
			fail_text = "requires_building_capital"
			OR = {
				has_building = building_capital
				has_building = building_major_capital
				has_building = building_system_capital
				has_building = building_imperial_capital
				has_building = building_ancient_palace
				# ACOT
				inline_script = {
					script = merger_of_rules/toggled_code
					code = "
						has_building = building_acot_dm_ancient_palace
						has_building = building_acot_ae_ancient_palace
						has_building = building_phanon_tower
						has_building = building_acot_ruined_giga_fortress
					"
					toggle = @has_ancient_caches
				}
				# ACOT SBTG
				has_sbtg_upgraded_capital = yes
				# All That Is GRIMDARK
				has_building = building_system_capital_gr
				# AOT
				inline_script = {
					script = merger_of_rules/toggled_code
					code = "
						has_building = building_stellarite_palace
						has_building = building_phanon_palace
					"
					toggle = @has_acquisition_of_tech
				}
				# AVB
				inline_script = {
					script = merger_of_rules/toggled_code
					code = "
						has_building = building_avb_capital_4
						has_building = building_avb_capital_5
						has_building = building_avb_capital_6
					"
					toggle = @has_avb_mod
				}
				# Azur Lane Stellaris DlC
				inline_script = {
					script = merger_of_rules/toggled_code
					code = "
						has_building = azur_building_mind_capital
						has_building = azur_building_mind_net_capital
					"
					toggle = @azl_mod
				}
				# Dawn of the Republic
				has_building = building_galactic_senate
				# EDA
				inline_script = {
					script = merger_of_rules/toggled_code
					code = "
						has_building = eda_building_imperial_capital
					"
					toggle = @eda_mod
				}
				# Gigastructural Engineering & More
				inline_script = {
					script = merger_of_rules/toggled_code
					code = "
						has_building = building_giga_elysium_host_major_capital
					"
					toggle = @has_gigastructures
				}
				# More Cosmogenesis Buildings
				has_building = building_cosmo_capital
				# Nirvana Empire Project
				inline_script = {
					script = merger_of_rules/toggled_code
					code = "
						has_building = building_nirvana_empire_palace
					"
					toggle = @nirvana_mod
				}
				# Star Wars: Kuat Ancient Empire
				inline_script = {
					script = merger_of_rules/toggled_code
					code = "
						has_building = building_kuat_command_center
					"
					toggle = @sw_kuat_mod
				}
				# Superstates
				inline_script = {
					script = merger_of_rules/toggled_code
					code = "
						has_building = building_grand_dvorets
						has_building = building_just_dvorets
						has_building = building_csenatec
						has_building = building_cgranhq
						has_building = building_cspire
						has_building = building_cfcouncil
						has_building = building_ccathedral
						has_building = building_seccouncilc
						has_building = building_centrehq
						has_building = building_git
						has_building = building_divsanct
						has_building = building_piratecovess
					"
					toggle = @has_superstates
				}
				# Twinks Atlantean
				has_building = building_ancient_palace_at
				# Twinks Kaldorei
				has_building = building_nightelf_palace
				# Eternal Empire
				inline_script = {
					script = merger_of_rules/toggled_code
					code = "
						has_building = building_eternal_palace
					"
					toggle = @has_eternal_empire
				}
				# galacot
				has_building = building_stellarite_galactic_capital
				has_building = building_stellarite_galactic_hive_capital
				has_building = building_stellarite_galactic_machine_capital
				# Wula Fallen Empire
				inline_script = {
					script = merger_of_rules/toggled_code
					code = "
						has_building = building_wula_archive
						has_building = building_all_is_dust
						has_building = building_wula_order_keep
						has_building = building_wula_gene_bank
					"
					toggle = @wula_compatch_var
				}
				# ZOFE
				has_building = building_fallen_palace
				has_building = building_fallen_ancient_palace
			}
		}
	}
}

has_major_upgraded_capital = {
	if = {
		limit = { has_modifier = resort_colony }
		custom_tooltip = {
			fail_text = "requires_building_resort_major_capital"
			OR = {
				has_building = building_resort_major_capital
				has_building = building_ancient_palace
				# ACOT
				inline_script = {
					script = merger_of_rules/toggled_code
					code = "
						has_building = building_acot_dm_ancient_palace
						has_building = building_acot_ae_ancient_palace
						has_building = building_phanon_tower
						has_building = building_acot_ruined_giga_fortress
					"
					toggle = @has_ancient_caches
				}
				# ACOT SBTG
				has_sbtg_upgraded_capital = yes
				# AOT
				inline_script = {
					script = merger_of_rules/toggled_code
					code = "
						has_building = building_stellarite_palace
						has_building = building_phanon_palace
					"
					toggle = @has_acquisition_of_tech
				}
				# AVB
				inline_script = {
					script = merger_of_rules/toggled_code
					code = "
						has_building = building_avb_resort_capital_3
					"
					toggle = @has_avb_mod
				}
				# EDA
				inline_script = {
					script = merger_of_rules/toggled_code
					code = "
						has_building = eda_building_imperial_capital
					"
					toggle = @eda_mod
				}
				# Star Wars: Kuat Ancient Empire
				inline_script = {
					script = merger_of_rules/toggled_code
					code = "
						has_building = building_kuat_command_center
					"
					toggle = @sw_kuat_mod
				}
				# Twinks Atlantean
				has_building = building_ancient_palace_at
				# Eternal Empire
				inline_script = {
					script = merger_of_rules/toggled_code
					code = "
						has_building = building_eternal_palace
					"
					toggle = @has_eternal_empire
				}
				# Twinks Kaldorei
				has_building = building_nightelf_palace
				# Special Colonies Overhaul
				has_building = building_SCO_resort_system_capital
				# ZOFE
				has_building = building_fallen_ancient_palace
				has_building = building_fallen_palace
			}
		}
	}
	else_if = {
		limit = { has_modifier = slave_colony }
		custom_tooltip = {
			fail_text = "requires_building_slave_major_capital"
			OR = {
				has_building = building_slave_major_capital
				has_building = building_ancient_palace
				# ACOT
				inline_script = {
					script = merger_of_rules/toggled_code
					code = "
						has_building = building_acot_dm_ancient_palace
						has_building = building_acot_ae_ancient_palace
						has_building = building_phanon_tower
						has_building = building_acot_ruined_giga_fortress
					"
					toggle = @has_ancient_caches
				}
				# ACOT SBTG
				has_sbtg_upgraded_capital = yes
				# AOT
				inline_script = {
					script = merger_of_rules/toggled_code
					code = "
						has_building = building_stellarite_palace
						has_building = building_phanon_palace
					"
					toggle = @has_acquisition_of_tech
				}
				# AVB
				inline_script = {
					script = merger_of_rules/toggled_code
					code = "
						has_building = building_avb_slave_capital_3
					"
					toggle = @has_avb_mod
				}
				# EDA
				inline_script = {
					script = merger_of_rules/toggled_code
					code = "
						has_building = eda_building_imperial_capital
					"
					toggle = @eda_mod
				}
				# Star Wars: Kuat Ancient Empire
				inline_script = {
					script = merger_of_rules/toggled_code
					code = "
						has_building = building_kuat_command_center
					"
					toggle = @sw_kuat_mod
				}
				# Twinks Atlantean
				has_building = building_ancient_palace_at
				# Eternal Empire
				inline_script = {
					script = merger_of_rules/toggled_code
					code = "
						has_building = building_eternal_palace
					"
					toggle = @has_eternal_empire
				}
				# Twinks Kaldorei
				has_building = building_nightelf_palace
				# Special Colonies Overhaul
				has_building = building_SCO_slave_system_capital
				# ZOFE
				has_building = building_fallen_ancient_palace
				has_building = building_fallen_palace
			}
		}
	}
	else_if = {
		limit = { uses_habitat_capitals = yes }
		custom_tooltip = {
			fail_text = "requires_building_hab_major_capital"
			OR = {
				has_building = building_hab_major_capital
				has_building = building_hab_system_capital
				has_building = building_imperial_capital
				has_building = building_imperial_machine_capital
				has_building = building_imperial_hive_capital
				has_building = building_hab_fe_capital
				# ACOT
				inline_script = {
					script = merger_of_rules/toggled_code
					code = "
						has_building = building_acot_dm_ancient_palace
						has_building = building_acot_ae_ancient_palace
						has_building = building_acot_dm_ancient_hive_cluster
						has_building = building_acot_ae_ancient_hive_cluster
						has_building = building_acot_dm_ancient_control_center
						has_building = building_acot_ae_ancient_control_center
						has_building = building_phanon_tower
						has_building = building_acot_ruined_giga_fortress
					"
					toggle = @has_ancient_caches
				}
				# ACOT SBTG
				has_sbtg_upgraded_capital = yes
				# AOT
				inline_script = {
					script = merger_of_rules/toggled_code
					code = "
						has_building = building_stellarite_palace
						has_building = building_stellarite_control_center
						has_building = building_stellarite_hive_cluster
						has_building = building_phanon_palace
						has_building = building_phanon_hive_cluster
						has_building = building_phanon_control_center
					"
					toggle = @has_acquisition_of_tech
				}
				# AVB
				inline_script = {
					script = merger_of_rules/toggled_code
					code = "
						has_building = building_avb_hab_capital_4
					"
					toggle = @has_avb_mod
				}
				# Dawn of the Republic
				has_building = building_galactic_senate
				# EDA
				inline_script = {
					script = merger_of_rules/toggled_code
					code = "
						has_building = eda_building_imperial_capital
					"
					toggle = @eda_mod
				}
				# More Cosmogenesis Buildings
				has_building = building_hab_cosmo_capital
				# Star Wars: Kuat Ancient Empire
				inline_script = {
					script = merger_of_rules/toggled_code
					code = "
						has_building = building_kuat_command_center
					"
					toggle = @sw_kuat_mod
				}
				# Superstates
				inline_script = {
					script = merger_of_rules/toggled_code
					code = "
						has_building = building_cmachine
						has_building = building_grand_dvorets
						has_building = building_just_dvorets
						has_building = building_csenatec
						has_building = building_cgranhq
						has_building = building_bugfables
						has_building = building_cspire
						has_building = building_cfcouncil
						has_building = building_ccathedral
						has_building = building_seccouncilc
						has_building = building_centrehq
						has_building = building_git
						has_building = building_divsanct
						has_building = building_piratecovess
						has_building = building_martlet
						has_building = building_czenith
						has_building = building_cbananas
					"
					toggle = @has_superstates
				}
				# Twinks Atlantean
				has_building = building_ancient_palace_at
				# Twinks Kaldorei
				has_building = building_nightelf_palace
				# Eternal Empire
				inline_script = {
					script = merger_of_rules/toggled_code
					code = "
						has_building = building_eternal_palace
						has_building = building_eternal_nexus_ai
					"
					toggle = @has_eternal_empire
				}
				# Wula Fallen Empire
				inline_script = {
					script = merger_of_rules/toggled_code
					code = "
						has_building = building_wula_archive
						has_building = building_all_is_dust
						has_building = building_wula_order_keep
						has_building = building_wula_gene_bank
					"
					toggle = @wula_compatch_var
				}
			}
		}
	}
	# Real Space - Planetary Stations
	else_if = {
		limit = { has_planet_flag = planetary_station }
		custom_tooltip = {
			inline_script = {
				script = merger_of_rules/toggled_code
				code = "
					fail_text = requires_building_planetary_station_major_capital
				"
				toggle = @rs_compatch_var
			}
			OR = {
				has_building = building_hab_fe_capital
				inline_script = {
					script = merger_of_rules/toggled_code
					code = "
						has_building = building_station_major_capital
						has_building = building_station_fe_capital
						has_building = building_station_system_capital
						has_building = building_prison_major_capital
						has_building = building_prison_system_capital
					"
					toggle = @rs_compatch_var
				}
				# ACOT / AOT / ZOFE
				inline_script = {
					script = merger_of_rules/toggled_code
					code = "
						has_building = building_acot_dm_ancient_palace
						has_building = building_acot_ae_ancient_palace
						has_building = building_acot_dm_ancient_hive_cluster
						has_building = building_acot_ae_ancient_hive_cluster
						has_building = building_acot_dm_ancient_control_center
						has_building = building_acot_ae_ancient_control_center
						has_building = building_phanon_tower
						has_building = building_acot_ruined_giga_fortress
					"
					toggle = @has_ancient_caches
				}
				# AOT
				inline_script = {
					script = merger_of_rules/toggled_code
					code = "
						has_building = building_stellarite_palace
						has_building = building_stellarite_control_center
						has_building = building_stellarite_hive_cluster
						has_building = building_phanon_palace
						has_building = building_phanon_hive_cluster
						has_building = building_phanon_control_center
					"
					toggle = @has_acquisition_of_tech
				}
				# More Cosmogenesis Buildings
				has_building = building_hab_cosmo_capital
				# Eternal Empire
				inline_script = {
					script = merger_of_rules/toggled_code
					code = "
						has_building = building_eternal_palace
					"
					toggle = @has_eternal_empire
				}
			}
		}
	}
	# Vanilla
	else_if = {
		limit = { owner = { is_hive_empire = yes } }
		custom_tooltip = {
			fail_text = "requires_building_major_hive_capital"
			OR = {
				has_building = building_hive_major_capital
				has_building = building_imperial_hive_capital
				# ACOT
				inline_script = {
					script = merger_of_rules/toggled_code
					code = "
						has_building = building_acot_dm_ancient_hive_cluster
						has_building = building_acot_ae_ancient_hive_cluster
						has_building = building_phanon_tower
						has_building = building_acot_ruined_giga_fortress
					"
					toggle = @has_ancient_caches
				}
				# ACOT SBTG
				has_sbtg_upgraded_capital = yes
				# All That Is GRIMDARK
				has_building = building_hive_major_capital_sick
				# AOT
				inline_script = {
					script = merger_of_rules/toggled_code
					code = "
						has_building = building_stellarite_hive_cluster
						has_building = building_phanon_hive_cluster
						has_building = building_ancient_hive_capital
					"
					toggle = @has_acquisition_of_tech
				}
				# AVB
				inline_script = {
					script = merger_of_rules/toggled_code
					code = "
						has_building = building_avb_hive_capital_3
						has_building = building_avb_hive_capital_4
					"
					toggle = @has_avb_mod
				}
				# EDA
				inline_script = {
					script = merger_of_rules/toggled_code
					code = "
						has_building = eda_building_imperial_capital
					"
					toggle = @eda_mod
				}
				# galacot
				has_building = building_stellarite_galactic_hive_capital
				# Gigastructural Engineering & More
				inline_script = {
					script = merger_of_rules/toggled_code
					code = "
						has_building = building_giga_elysium_host_hive_major_capital
					"
					toggle = @has_gigastructures
				}
				# More Cosmogenesis Buildings
				has_building = building_cosmo_hive_capital
				# Star Wars: Kuat Ancient Empire
				inline_script = {
					script = merger_of_rules/toggled_code
					code = "
						has_building = building_kuat_command_center
					"
					toggle = @sw_kuat_mod
				}
				# Superstates
				inline_script = {
					script = merger_of_rules/toggled_code
					code = "
						has_building = building_bugfables
					"
					toggle = @has_superstates
				}
			}
		}
	}
	else_if = {
		limit = { owner = { is_machine_empire = yes } }
		custom_tooltip = {
			fail_text = "requires_building_machine_major_capital"
			OR = {
				has_building = building_machine_major_capital
				has_building = building_machine_system_capital
				has_building = building_imperial_machine_capital
				has_building = building_ancient_control_center
				# ACOT
				inline_script = {
					script = merger_of_rules/toggled_code
					code = "
						has_building = building_acot_dm_ancient_control_center
						has_building = building_acot_ae_ancient_control_center
						has_building = building_phanon_tower
						has_building = building_acot_ruined_giga_fortress
					"
					toggle = @has_ancient_caches
				}
				# ACOT SBTG
				has_sbtg_upgraded_capital = yes
				# AOT
				inline_script = {
					script = merger_of_rules/toggled_code
					code = "
						has_building = building_stellarite_control_center
						has_building = building_phanon_control_center
					"
					toggle = @has_acquisition_of_tech
				}
				# AVB
				inline_script = {
					script = merger_of_rules/toggled_code
					code = "
						has_building = building_avb_machine_capital_4
						has_building = building_avb_machine_capital_5
						has_building = building_avb_machine_capital_6
					"
					toggle = @has_avb_mod
				}
				# EDA
				inline_script = {
					script = merger_of_rules/toggled_code
					code = "
						has_building = eda_building_imperial_capital
					"
					toggle = @eda_mod
				}
				# Empires Expanded
				inline_script = {
					script = merger_of_rules/toggled_code
					code = "
						has_building = building_bok_capital_2
						has_building = building_bok_capital_3
					"
					toggle = @has_emex_mod
				}
				# galacot
				has_building = building_stellarite_galactic_machine_capital
				# Gigastructural Engineering & More
				inline_script = {
					script = merger_of_rules/toggled_code
					code = "
						has_building = building_giga_elysium_host_machine_major_capital
					"
					toggle = @has_gigastructures
				}
				# More Cosmogenesis Buildings
				has_building = building_cosmo_machine_capital
				# Star Wars: Kuat Ancient Empire
				inline_script = {
					script = merger_of_rules/toggled_code
					code = "
						has_building = building_kuat_command_center
					"
					toggle = @sw_kuat_mod
				}
				#Superstates
				inline_script = {
					script = merger_of_rules/toggled_code
					code = "
						has_building = building_central_citadel
						has_building = building_simple_citadel
						has_building = building_cmachine
						has_building = building_martlet
					"
					toggle = @has_superstates
				}
				# Eternal Empire
				inline_script = {
					script = merger_of_rules/toggled_code
					code = "
						has_building = building_eternal_nexus_ai
					"
					toggle = @has_eternal_empire
				}
			}
		}
	}
	else = {
		custom_tooltip = {
			fail_text = "requires_building_major_capital"
			OR = {
				has_building = building_major_capital
				has_building = building_system_capital
				has_building = building_imperial_capital
				has_building = building_ancient_palace
				# ACOT
				inline_script = {
					script = merger_of_rules/toggled_code
					code = "
						has_building = building_acot_dm_ancient_palace
						has_building = building_acot_ae_ancient_palace
						has_building = building_phanon_tower
						has_building = building_acot_ruined_giga_fortress
					"
					toggle = @has_ancient_caches
				}
				# ACOT SBTG
				has_sbtg_upgraded_capital = yes
				# All That Is GRIMDARK
				has_building = building_system_capital_gr
				# AOT
				inline_script = {
					script = merger_of_rules/toggled_code
					code = "
						has_building = building_stellarite_palace
						has_building = building_phanon_palace
					"
					toggle = @has_acquisition_of_tech
				}
				# AVB
				inline_script = {
					script = merger_of_rules/toggled_code
					code = "
						has_building = building_avb_capital_4
						has_building = building_avb_capital_5
						has_building = building_avb_capital_6
					"
					toggle = @has_avb_mod
				}
				# Azur Lane Stellaris DLC
				inline_script = {
					script = merger_of_rules/toggled_code
					code = "
						has_building = azur_building_mind_capital
						has_building = azur_building_mind_net_capital
					"
					toggle = @azl_mod
				}
				# Dawn of the Republic
				has_building = building_galactic_senate
				# EDA
				inline_script = {
					script = merger_of_rules/toggled_code
					code = "
						has_building = eda_building_imperial_capital
					"
					toggle = @eda_mod
				}
				# galacot
				has_building = building_stellarite_galactic_capital
				# Gigastructural Engineering & More
				inline_script = {
					script = merger_of_rules/toggled_code
					code = "
						has_building = building_giga_elysium_host_major_capital
					"
					toggle = @has_gigastructures
				}
				# More Cosmogenesis Buildings
				has_building = building_cosmo_capital
				# Nirvana Empire Project
				inline_script = {
					script = merger_of_rules/toggled_code
					code = "
						has_building = building_nirvana_empire_palace
					"
					toggle = @nirvana_mod
				}
				# Twinks Atlantean
				has_building = building_ancient_palace_at
				# Twinks Kaldorei
				has_building = building_nightelf_palace
				# Eternal Empire
				inline_script = {
					script = merger_of_rules/toggled_code
					code = "
						has_building = building_eternal_palace
					"
					toggle = @has_eternal_empire
				}
				# Star Wars: Kuat Ancient Empire
				inline_script = {
					script = merger_of_rules/toggled_code
					code = "
						has_building = building_kuat_command_center
					"
					toggle = @sw_kuat_mod
				}
				# Superstates
				inline_script = {
					script = merger_of_rules/toggled_code
					code = "
						has_building = building_grand_dvorets
						has_building = building_just_dvorets
						has_building = building_csenatec
						has_building = building_cgranhq
						has_building = building_cspire
						has_building = building_cfcouncil
						has_building = building_ccathedral
						has_building = building_seccouncilc
						has_building = building_centrehq
						has_building = building_git
						has_building = building_divsanct
						has_building = building_piratecovess
					"
					toggle = @has_superstates
				}
				# Wula Fallen Empire
				inline_script = {
					script = merger_of_rules/toggled_code
					code = "
						has_building = building_wula_archive
						has_building = building_all_is_dust
						has_building = building_wula_order_keep
						has_building = building_wula_gene_bank
					"
					toggle = @wula_compatch_var
				}
				# ZOFE
				inline_script = {
					script = merger_of_rules/toggled_code
					code = "
						has_building = building_fallen_palace
						has_building = building_fallen_ancient_palace
					"
					toggle = @has_zofe_vanilla
				}
			}
		}
	}
}

has_fully_upgraded_capital = {
	if = {
		limit = { has_modifier = resort_colony }
		custom_tooltip = {
			fail_text = "requires_building_resort_major_capital"
			OR = {
				has_building = building_resort_major_capital
				has_building = building_ancient_palace
				# ACOT
				inline_script = {
					script = merger_of_rules/toggled_code
					code = "
						has_building = building_acot_dm_ancient_palace
						has_building = building_acot_ae_ancient_palace
						has_building = building_phanon_tower
						has_building = building_acot_ruined_giga_fortress
					"
					toggle = @has_ancient_caches
				}
				# ACOT SBTG
				has_sbtg_upgraded_capital = yes
				# AOT
				inline_script = {
					script = merger_of_rules/toggled_code
					code = "
						has_building = building_stellarite_palace
						has_building = building_phanon_palace
					"
					toggle = @has_acquisition_of_tech
				}
				# AVB
				inline_script = {
					script = merger_of_rules/toggled_code
					code = "
						has_building = building_avb_resort_capital_3
					"
					toggle = @has_avb_mod
				}
				# EDA
				inline_script = {
					script = merger_of_rules/toggled_code
					code = "
						has_building = eda_building_imperial_capital
					"
					toggle = @eda_mod
				}
				# More Cosmogenesis Buildings
				has_building = building_resort_cosmo_capital
				# Star Wars: Kuat Ancient Empire
				inline_script = {
					script = merger_of_rules/toggled_code
					code = "
						has_building = building_kuat_command_center
					"
					toggle = @sw_kuat_mod
				}
				# Twinks Atlantean
				has_building = building_ancient_palace_at
				# Twinks Kaldorei
				has_building = building_nightelf_palace
				# Special Colonies Overhaul
				has_building = building_SCO_resort_system_capital
				# ZOFE
				has_building = building_fallen_ancient_palace
				has_building = building_fallen_palace
			}
		}
	}
	else_if = {
		limit = { has_modifier = slave_colony }
		custom_tooltip = {
			fail_text = "requires_building_slave_major_capital"
			OR = {
				has_building = building_slave_major_capital
				has_building = building_ancient_palace
				# ACOT
				inline_script = {
					script = merger_of_rules/toggled_code
					code = "
						has_building = building_acot_dm_ancient_palace
						has_building = building_acot_ae_ancient_palace
						has_building = building_phanon_tower
						has_building = building_acot_ruined_giga_fortress
					"
					toggle = @has_ancient_caches
				}
				# ACOT SBTG
				has_sbtg_upgraded_capital = yes
				# AOT
				inline_script = {
					script = merger_of_rules/toggled_code
					code = "
						has_building = building_stellarite_palace
						has_building = building_phanon_palace
					"
					toggle = @has_acquisition_of_tech
				}
				# AVB
				inline_script = {
					script = merger_of_rules/toggled_code
					code = "
						has_building = building_avb_slave_capital_3
					"
					toggle = @has_avb_mod
				}
				# EDA
				inline_script = {
					script = merger_of_rules/toggled_code
					code = "
						has_building = eda_building_imperial_capital
					"
					toggle = @eda_mod
				}
				# Star Wars: Kuat Ancient Empire
				inline_script = {
					script = merger_of_rules/toggled_code
					code = "
						has_building = building_kuat_command_center
					"
					toggle = @sw_kuat_mod
				}
				# Twinks Atlantean
				has_building = building_ancient_palace_at
				# Twinks Kaldorei
				has_building = building_nightelf_palace
				# Special Colonies Overhaul
				has_building = building_SCO_slave_system_capital
				# ZOFE
				has_building = building_fallen_ancient_palace
				has_building = building_fallen_palace
			}
		}
	}
	else_if = {
		limit = { uses_habitat_capitals = yes }
		custom_tooltip = {
			fail_text = "requires_building_hab_system_capital"
			OR = {
				has_building = building_hab_system_capital
				has_building = building_imperial_capital
				has_building = building_imperial_machine_capital
				has_building = building_imperial_hive_capital
				has_building = building_hab_fe_capital
				# ACOT
				inline_script = {
					script = merger_of_rules/toggled_code
					code = "
						has_building = building_acot_dm_ancient_palace
						has_building = building_acot_ae_ancient_palace
						has_building = building_acot_dm_ancient_hive_cluster
						has_building = building_acot_ae_ancient_hive_cluster
						has_building = building_acot_dm_ancient_control_center
						has_building = building_acot_ae_ancient_control_center
						has_building = building_phanon_tower
						has_building = building_acot_ruined_giga_fortress
					"
					toggle = @has_ancient_caches
				}
				# ACOT SBTG
				has_sbtg_upgraded_capital = yes
				# AOT
				inline_script = {
					script = merger_of_rules/toggled_code
					code = "
						has_building = building_stellarite_palace
						has_building = building_stellarite_control_center
						has_building = building_stellarite_hive_cluster
						has_building = building_phanon_palace
						has_building = building_phanon_hive_cluster
						has_building = building_phanon_control_center
					"
					toggle = @has_acquisition_of_tech
				}
				# AVB
				inline_script = {
					script = merger_of_rules/toggled_code
					code = "
						has_building = building_avb_hab_capital_4
					"
					toggle = @has_avb_mod
				}
				# Dawn of the Republic
				has_building = building_galactic_senate
				# EDA
				inline_script = {
					script = merger_of_rules/toggled_code
					code = "
						has_building = eda_building_imperial_capital
					"
					toggle = @eda_mod
				}
				# More Cosmogenesis Buildings
				has_building = building_hab_cosmo_capital
				# Star Wars: Kuat Ancient Empire
				inline_script = {
					script = merger_of_rules/toggled_code
					code = "
						has_building = building_kuat_command_center
					"
					toggle = @sw_kuat_mod
				}
				# Superstates
				inline_script = {
					script = merger_of_rules/toggled_code
					code = "
						has_building = building_central_citadel
						has_building = building_simple_citadel
						has_building = building_cmachine
						has_building = building_grand_dvorets
						has_building = building_just_dvorets
						has_building = building_csenatec
						has_building = building_cgranhq
						has_building = building_bugfables
						has_building = building_cspire
						has_building = building_cfcouncil
						has_building = building_ccathedral
						has_building = building_seccouncilc
						has_building = building_centrehq
						has_building = building_git
						has_building = building_divsanct
						has_building = building_piratecovess
						has_building = building_martlet
						has_building = building_czenith
						has_building = building_cbananas
					"
					toggle = @has_superstates
				}
				# Twinks Atlantean
				has_building = building_ancient_palace_at
				# Eternal Empire
				inline_script = {
					script = merger_of_rules/toggled_code
					code = "
						has_building = building_eternal_palace
						has_building = building_eternal_nexus_ai
					"
					toggle = @has_eternal_empire
				}
				# Twinks Kaldorei
				has_building = building_nightelf_palace
				# Wula Fallen Empire
				inline_script = {
					script = merger_of_rules/toggled_code
					code = "
						has_building = building_wula_archive
						has_building = building_all_is_dust
						has_building = building_wula_order_keep
						has_building = building_wula_gene_bank
					"
					toggle = @wula_compatch_var
				}
			}
		}
	}
	# Real Space - Planetary Stations
	else_if = {
		limit = { has_planet_flag = planetary_station }
		custom_tooltip = {
			inline_script = {
				script = merger_of_rules/toggled_code
				code = "
					fail_text = requires_building_planetary_station_system_capital
				"
				toggle = @rs_compatch_var
			}
			OR = {
				has_building = building_hab_fe_capital
				inline_script = {
					script = merger_of_rules/toggled_code
					code = "
						has_building = building_station_fe_capital
						has_building = building_station_system_capital
						has_building = building_prison_system_capital
					"
					toggle = @rs_compatch_var
				}
				# ACOT
				inline_script = {
					script = merger_of_rules/toggled_code
					code = "
						has_building = building_acot_dm_ancient_palace
						has_building = building_acot_ae_ancient_palace
						has_building = building_acot_dm_ancient_hive_cluster
						has_building = building_acot_ae_ancient_hive_cluster
						has_building = building_acot_dm_ancient_control_center
						has_building = building_acot_ae_ancient_control_center
						has_building = building_phanon_tower
						has_building = building_acot_ruined_giga_fortress
					"
					toggle = @has_ancient_caches
				}
				# ACOT SBTG
				has_sbtg_upgraded_capital = yes
				# AOT
				inline_script = {
					script = merger_of_rules/toggled_code
					code = "
						has_building = building_stellarite_palace
						has_building = building_stellarite_control_center
						has_building = building_stellarite_hive_cluster
						has_building = building_phanon_palace
						has_building = building_phanon_hive_cluster
						has_building = building_phanon_control_center
					"
					toggle = @has_acquisition_of_tech
				}
				# More Cosmogenesis Buildings
				has_building = building_hab_cosmo_capital
				# Eternal Empire
				inline_script = {
					script = merger_of_rules/toggled_code
					code = "
						has_building = building_eternal_palace
					"
					toggle = @has_eternal_empire
				}
			}
		}
	}
	# Vanilla
	else_if = {
		limit = { owner = { is_hive_empire = yes } }
		custom_tooltip = {
			fail_text = "requires_building_major_hive_capital"
			OR = {
				has_building = building_hive_major_capital
				has_building = building_imperial_hive_capital
				# ACOT
				inline_script = {
					script = merger_of_rules/toggled_code
					code = "
						has_building = building_acot_dm_ancient_hive_cluster
						has_building = building_acot_ae_ancient_hive_cluster
						has_building = building_phanon_tower
						has_building = building_acot_ruined_giga_fortress
					"
					toggle = @has_ancient_caches
				}
				# ACOT SBTG
				has_sbtg_upgraded_capital = yes
				# All That Is GRIMDARK
				has_building = building_hive_major_capital_sick
				# AOT
				inline_script = {
					script = merger_of_rules/toggled_code
					code = "
						has_building = building_stellarite_hive_cluster
						has_building = building_phanon_hive_cluster
						has_building = building_ancient_hive_capital
					"
					toggle = @has_acquisition_of_tech
				}
				# AVB
				inline_script = {
					script = merger_of_rules/toggled_code
					code = "
						has_building = building_avb_hive_capital_3
						has_building = building_avb_hive_capital_4
					"
					toggle = @has_avb_mod
				}
				# EDA
				inline_script = {
					script = merger_of_rules/toggled_code
					code = "
						has_building = eda_building_imperial_capital
					"
					toggle = @eda_mod
				}
				# galacot
				has_building = building_stellarite_galactic_hive_capital
				# Gigastructural Engineering & More
				inline_script = {
					script = merger_of_rules/toggled_code
					code = "
						has_building = building_giga_elysium_host_hive_major_capital
					"
					toggle = @has_gigastructures
				}
				# More Cosmogenesis Buildings
				has_building = building_cosmo_hive_capital
				# Star Wars: Kuat Ancient Empire
				inline_script = {
					script = merger_of_rules/toggled_code
					code = "
						has_building = building_kuat_command_center
					"
					toggle = @sw_kuat_mod
				}
				# Superstates
				inline_script = {
					script = merger_of_rules/toggled_code
					code = "
						has_building = building_bugfables
					"
					toggle = @has_superstates
				}
			}
		}
	}
	else_if = {
		limit = { owner = { is_machine_empire = yes } }
		custom_tooltip = {
			fail_text = "requires_building_machine_major_capital"
			OR = {
				has_building = building_machine_major_capital
				has_building = building_machine_system_capital
				has_building = building_imperial_machine_capital
				# ACOT
				inline_script = {
					script = merger_of_rules/toggled_code
					code = "
						has_building = building_acot_dm_ancient_control_center
						has_building = building_acot_ae_ancient_control_center
						has_building = building_phanon_tower
						has_building = building_acot_ruined_giga_fortress
					"
					toggle = @has_ancient_caches
				}
				# ACOT SBTG
				has_sbtg_upgraded_capital = yes
				# AOT
				inline_script = {
					script = merger_of_rules/toggled_code
					code = "
						has_building = building_stellarite_control_center
						has_building = building_phanon_control_center
					"
					toggle = @has_acquisition_of_tech
				}
				# AVB
				inline_script = {
					script = merger_of_rules/toggled_code
					code = "
						has_building = building_avb_machine_capital_4
						has_building = building_avb_machine_capital_5
						has_building = building_avb_machine_capital_6
					"
					toggle = @has_avb_mod
				}
				# EDA
				inline_script = {
					script = merger_of_rules/toggled_code
					code = "
						has_building = eda_building_imperial_capital
					"
					toggle = @eda_mod
				}
				# Empires Expanded
				inline_script = {
					script = merger_of_rules/toggled_code
					code = "
						has_building = building_bok_capital_3
					"
					toggle = @has_emex_mod
				}
				# galacot
				has_building = building_stellarite_galactic_machine_capital
				# Gigastructural Engineering & More
				inline_script = {
					script = merger_of_rules/toggled_code
					code = "
						has_building = building_giga_elysium_host_machine_major_capital
					"
					toggle = @has_gigastructures
				}
				# More Cosmogenesis Buildings
				has_building = building_cosmo_machine_capital
				# Star Wars: Kuat Ancient Empire
				inline_script = {
					script = merger_of_rules/toggled_code
					code = "
						has_building = building_kuat_command_center
					"
					toggle = @sw_kuat_mod
				}
				# Superstates
				inline_script = {
					script = merger_of_rules/toggled_code
					code = "
						has_building = building_central_citadel
						has_building = building_simple_citadel
						has_building = building_cmachine
						has_building = building_martlet
					"
					toggle = @has_superstates
				}
				# Eternal Empire
				inline_script = {
					script = merger_of_rules/toggled_code
					code = "
						has_building = building_eternal_nexus_ai
					"
					toggle = @has_eternal_empire
				}
			}
		}
	}
	else = {
		custom_tooltip = {
			fail_text = "requires_building_system_capital"
			OR = {
				has_building = building_system_capital
				has_building = building_imperial_capital
				# ACOT
				inline_script = {
					script = merger_of_rules/toggled_code
					code = "
						has_building = building_acot_dm_ancient_palace
						has_building = building_acot_ae_ancient_palace
						has_building = building_phanon_tower
						has_building = building_acot_ruined_giga_fortress
					"
					toggle = @has_ancient_caches
				}
				# ACOT SBTG
				has_sbtg_upgraded_capital = yes
				# All That Is GRIMDARK
				has_building = building_system_capital_gr
				# AOT
				inline_script = {
					script = merger_of_rules/toggled_code
					code = "
						has_building = building_stellarite_palace
						has_building = building_phanon_palace
					"
					toggle = @has_acquisition_of_tech
				}
				# AVB
				inline_script = {
					script = merger_of_rules/toggled_code
					code = "
						has_building = building_avb_capital_4
						has_building = building_avb_capital_5
						has_building = building_avb_capital_6
					"
					toggle = @has_avb_mod
				}
				# Azur Lane Stellaris DLC
				inline_script = {
					script = merger_of_rules/toggled_code
					code = "
						has_building = azur_building_mind_capital
						has_building = azur_building_mind_net_capital
					"
					toggle = @azl_mod
				}
				# Dawn of the Republic
				has_building = building_galactic_senate
				# EDA
				inline_script = {
					script = merger_of_rules/toggled_code
					code = "
						has_building = eda_building_imperial_capital
					"
					toggle = @eda_mod
				}
				# galacot
				has_building = building_stellarite_galactic_capital
				# Gigastructural Engineering & More
				inline_script = {
					script = merger_of_rules/toggled_code
					code = "
						has_building = building_giga_elysium_host_major_capital
					"
					toggle = @has_gigastructures
				}
				# More Cosmogenesis Buildings
				has_building = building_cosmo_capital
				# Nirvana Empire Project
				inline_script = {
					script = merger_of_rules/toggled_code
					code = "
						has_building = building_nirvana_empire_palace
					"
					toggle = @nirvana_mod
				}
				# Star Wars: Kuat Ancient Empire
				inline_script = {
					script = merger_of_rules/toggled_code
					code = "
						has_building = building_kuat_command_center
					"
					toggle = @sw_kuat_mod
				}
				# Superstates
				inline_script = {
					script = merger_of_rules/toggled_code
					code = "
						has_building = building_grand_dvorets
						has_building = building_just_dvorets
						has_building = building_csenatec
						has_building = building_cgranhq
						has_building = building_cspire
						has_building = building_cfcouncil
						has_building = building_ccathedral
						has_building = building_seccouncilc
						has_building = building_centrehq
						has_building = building_git
						has_building = building_divsanct
						has_building = building_piratecovess
					"
					toggle = @has_superstates
				}
				# Twinks Atlantean
				has_building = building_ancient_palace_at
				# Twinks Kaldorei
				has_building = building_nightelf_palace
				# Eternal Empire
				inline_script = {
					script = merger_of_rules/toggled_code
					code = "
						has_building = building_eternal_palace
					"
					toggle = @has_eternal_empire
				}
				# Wula Fallen Empire
				inline_script = {
					script = merger_of_rules/toggled_code
					code = "
						has_building = building_wula_archive
						has_building = building_all_is_dust
						has_building = building_wula_order_keep
						has_building = building_wula_gene_bank
					"
					toggle = @wula_compatch_var
				}
				# ZOFE
				inline_script = {
					script = merger_of_rules/toggled_code
					code = "
						has_building = building_fallen_palace
						has_building = building_fallen_ancient_palace
					"
					toggle = @has_zofe_vanilla
				}
			}
		}
	}
}

# ACOT
has_enigmatic_capital = {
	if = {
		limit = { owner = { is_hive_empire = yes } }
		custom_tooltip = {
			inline_script = {
				script = merger_of_rules/toggled_code
				code = "
					fail_text = requires_building_fe_capital_hive
				"
				toggle = @has_ancient_caches
			}
			OR = {
				has_building = building_imperial_hive_capital
				inline_script = {
					script = merger_of_rules/toggled_code
					code = "
						has_building = building_acot_dm_ancient_hive_cluster
						has_building = building_acot_ae_ancient_hive_cluster
						has_building = building_phanon_tower
						has_building = building_acot_ruined_giga_fortress
					"
					toggle = @has_ancient_caches
				}
				# ACOT SBTG
				has_sbtg_upgraded_capital = yes
				# AOT
				inline_script = {
					script = merger_of_rules/toggled_code
					code = "
						has_building = building_stellarite_hive_cluster
						has_building = building_phanon_hive_cluster
					"
					toggle = @has_acquisition_of_tech
				}
				# EDA
				inline_script = {
					script = merger_of_rules/toggled_code
					code = "
						has_building = eda_building_imperial_capital
					"
					toggle = @eda_mod
				}
				# galacot
				has_building = building_stellarite_galactic_hive_capital
			}
		}
	}
	else_if = {
		limit = { owner = { is_machine_empire = yes } }
		custom_tooltip = {
			inline_script = {
				script = merger_of_rules/toggled_code
				code = "
					fail_text = requires_building_fe_capital_machine
				"
				toggle = @has_ancient_caches
			}
			OR = {
				has_building = building_imperial_machine_capital
				inline_script = {
					script = merger_of_rules/toggled_code
					code = "
						has_building = building_acot_dm_ancient_control_center
						has_building = building_acot_ae_ancient_control_center
						has_building = building_phanon_tower
						has_building = building_acot_ruined_giga_fortress
					"
					toggle = @has_ancient_caches
				}
				# ACOT SBTG
				has_sbtg_upgraded_capital = yes
				# AOT
				inline_script = {
					script = merger_of_rules/toggled_code
					code = "
						has_building = building_stellarite_control_center
						has_building = building_phanon_control_center
					"
					toggle = @has_acquisition_of_tech
				}
				# EDA
				inline_script = {
					script = merger_of_rules/toggled_code
					code = "
						has_building = eda_building_imperial_capital
					"
					toggle = @eda_mod
				}
				# galacot
				has_building = building_stellarite_galactic_machine_capital
				# Eternal Empire
				inline_script = {
					script = merger_of_rules/toggled_code
					code = "
						has_building = building_eternal_nexus_ai
					"
					toggle = @has_eternal_empire
				}
			}
		}
	}
	else = {
		custom_tooltip = {
			inline_script = {
				script = merger_of_rules/toggled_code
				code = "
					fail_text = requires_building_fe_capital
				"
				toggle = @has_ancient_caches
			}
			OR = {
				has_building = building_imperial_capital
				inline_script = {
					script = merger_of_rules/toggled_code
					code = "
						has_building = building_acot_dm_ancient_palace
						has_building = building_acot_ae_ancient_palace
						has_building = building_phanon_tower
						has_building = building_acot_ruined_giga_fortress
					"
					toggle = @has_ancient_caches
				}
				# ACOT SBTG
				has_sbtg_upgraded_capital = yes
				# AOT
				inline_script = {
					script = merger_of_rules/toggled_code
					code = "
						has_building = building_stellarite_palace
						has_building = building_phanon_palace
					"
					toggle = @has_acquisition_of_tech
				}
				# ACOT SBTG
				has_sbtg_upgraded_capital = yes
				# EDA
				inline_script = {
					script = merger_of_rules/toggled_code
					code = "
						has_building = eda_building_imperial_capital
					"
					toggle = @eda_mod
				}
				# Twinks Atlantean
				has_building = building_ancient_palace_at
				# Twinks Kaldorei
				has_building = building_nightelf_palace
				# Eternal Empire
				inline_script = {
					script = merger_of_rules/toggled_code
					code = "
						has_building = building_eternal_palace
					"
					toggle = @has_eternal_empire
				}
				# galacot
				has_building = building_stellarite_galactic_capital
				# Wula Fallen Empire
				inline_script = {
					script = merger_of_rules/toggled_code
					code = "
						has_building = building_wula_archive
						has_building = building_all_is_dust
						has_building = building_wula_order_keep
						has_building = building_wula_gene_bank
					"
					toggle = @wula_compatch_var
				}
			}
		}
	}
}

has_ascended_capital = {
	if = {
		limit = { owner = { is_hive_empire = yes } }
		custom_tooltip = {
			inline_script = {
				script = merger_of_rules/toggled_code
				code = "
					fail_text = requires_building_fe_capital_hive
				"
				toggle = @has_ancient_caches
			}
			OR = {
				has_building = building_imperial_hive_capital
				inline_script = {
					script = merger_of_rules/toggled_code
					code = "
						has_building = building_acot_ae_ancient_hive_cluster
						has_building = building_phanon_tower
					"
					toggle = @has_ancient_caches
				}
				# ACOT SBTG
				has_sbtg_upgraded_capital = yes
				# AOT
				inline_script = {
					script = merger_of_rules/toggled_code
					code = "
						has_building = building_stellarite_hive_cluster
						has_building = building_phanon_hive_cluster
					"
					toggle = @has_acquisition_of_tech
				}
				# EDA
				inline_script = {
					script = merger_of_rules/toggled_code
					code = "
						has_building = eda_building_imperial_capital
					"
					toggle = @eda_mod
				}
				# galacot
				has_building = building_stellarite_galactic_hive_capital
				# Eternal Empire
				inline_script = {
					script = merger_of_rules/toggled_code
					code = "
						has_building = building_eternal_palace
					"
					toggle = @has_eternal_empire
				}
			}
		}
	}
	else_if = {
		limit = { owner = { is_machine_empire = yes } }
		custom_tooltip = {
			inline_script = {
				script = merger_of_rules/toggled_code
				code = "
					fail_text = requires_building_fe_capital_machine
				"
				toggle = @has_ancient_caches
			}
			OR = {
				has_building = building_imperial_machine_capital
				inline_script = {
					script = merger_of_rules/toggled_code
					code = "
						has_building = building_acot_ae_ancient_control_center
						has_building = building_phanon_tower
					"
					toggle = @has_ancient_caches
				}
				# ACOT SBTG
				has_sbtg_upgraded_capital = yes
				# AOT
				inline_script = {
					script = merger_of_rules/toggled_code
					code = "
						has_building = building_stellarite_control_center
						has_building = building_phanon_control_center
					"
					toggle = @has_acquisition_of_tech
				}
				# EDA
				inline_script = {
					script = merger_of_rules/toggled_code
					code = "
						has_building = eda_building_imperial_capital
					"
					toggle = @eda_mod
				}
				# galacot
 				has_building = building_stellarite_galactic_machine_capital
				# Eternal Empire
				inline_script = {
					script = merger_of_rules/toggled_code
					code = "
						has_building = building_eternal_nexus_ai
					"
					toggle = @has_eternal_empire
				}
			}
		}
	}
	else = {
		custom_tooltip = {
			inline_script = {
				script = merger_of_rules/toggled_code
				code = "
					fail_text = requires_building_fe_capital
				"
				toggle = @has_ancient_caches
			}
			OR = {
				has_building = building_imperial_capital
				inline_script = {
					script = merger_of_rules/toggled_code
					code = "
						has_building = building_acot_ae_ancient_palace
						has_building = building_phanon_tower
					"
					toggle = @has_ancient_caches
				}
				# ACOT SBTG
				has_sbtg_upgraded_capital = yes
				# AOT
				inline_script = {
					script = merger_of_rules/toggled_code
					code = "
						has_building = building_stellarite_palace
						has_building = building_phanon_palace
					"
					toggle = @has_acquisition_of_tech
				}
				# EDA
				inline_script = {
					script = merger_of_rules/toggled_code
					code = "
						has_building = eda_building_imperial_capital
					"
					toggle = @eda_mod
				}
				# Twinks Atlantean
				has_building = building_ancient_palace_at
				# Twinks Kaldorei
				has_building = building_nightelf_palace
				# Eternal Empire
				inline_script = {
					script = merger_of_rules/toggled_code
					code = "
						has_building = building_eternal_palace
					"
					toggle = @has_eternal_empire
				}
				# galacot
				has_building = building_stellarite_galactic_capital
			}
		}
	}
}

has_phanon_capital = {
	if = {
		limit = {
			owner = {
				is_hive_empire = yes
			}
		}
		custom_tooltip = {
			inline_script = {
				script = merger_of_rules/toggled_code
				code = "
					fail_text = requires_building_phanon_capital_hive
				"
				toggle = @has_ancient_caches
			}
			OR = {
				has_building = building_imperial_hive_capital
				inline_script = {
					script = merger_of_rules/toggled_code
					code = "
						has_building = building_phanon_tower
					"
					toggle = @has_ancient_caches
				}
				# ACOT SBTG
				has_sbtg_upgraded_capital = yes
				# AOT
				inline_script = {
					script = merger_of_rules/toggled_code
					code = "
						has_building = building_phanon_hive_cluster
						has_building = building_stellarite_hive_cluster
					"
					toggle = @has_acquisition_of_tech
				}
				# EDA
				inline_script = {
					script = merger_of_rules/toggled_code
					code = "
						has_building = eda_building_imperial_capital
					"
					toggle = @eda_mod
				}
				# GALACOT
				has_building = building_stellarite_galactic_hive_capital
			}
		}
	}
	else_if = {
		limit = {
			owner = {
				is_machine_empire = yes
			}
		}
		custom_tooltip = {
			inline_script = {
				script = merger_of_rules/toggled_code
				code = "
					fail_text = requires_building_phanon_capital_machine
				"
				toggle = @has_ancient_caches
			}
			OR = {
				has_building = building_imperial_machine_capital
				inline_script = {
					script = merger_of_rules/toggled_code
					code = "
						has_building = building_phanon_tower
					"
					toggle = @has_ancient_caches
				}
				# ACOT SBTG
				has_sbtg_upgraded_capital = yes
				# AOT
				inline_script = {
					script = merger_of_rules/toggled_code
					code = "
						has_building = building_phanon_control_center
						has_building = building_stellarite_control_center
					"
					toggle = @has_acquisition_of_tech
				}
				# EDA
				inline_script = {
					script = merger_of_rules/toggled_code
					code = "
						has_building = eda_building_imperial_capital
					"
					toggle = @eda_mod
				}
				# GALACOT
				has_building = building_stellarite_galactic_machine_capital
				# Eternal Empire
				inline_script = {
					script = merger_of_rules/toggled_code
					code = "
						has_building = building_eternal_nexus_ai
					"
					toggle = @has_eternal_empire
				}
			}
		}
	}
	else = {
		custom_tooltip = {
			inline_script = {
				script = merger_of_rules/toggled_code
				code = "
					fail_text = requires_building_phanon_capital
				"
				toggle = @has_ancient_caches
			}
			OR = {
				has_building = building_imperial_capital
				inline_script = {
					script = merger_of_rules/toggled_code
					code = "
						has_building = building_phanon_tower
					"
					toggle = @has_ancient_caches
				}
				# ACOT SBTG
				has_sbtg_upgraded_capital = yes
				# AOT
				inline_script = {
					script = merger_of_rules/toggled_code
					code = "
						has_building = building_phanon_palace
						has_building = building_stellarite_palace
					"
					toggle = @has_acquisition_of_tech
				}
				# EDA
				inline_script = {
					script = merger_of_rules/toggled_code
					code = "
						has_building = eda_building_imperial_capital
					"
					toggle = @eda_mod
				}
				# GALACOT
				has_building = building_stellarite_galactic_capital
				has_building = building_stellarite_galactic_hive_capital
				has_building = building_stellarite_galactic_machine_capital
				# Eternal Empire
				inline_script = {
					script = merger_of_rules/toggled_code
					code = "
						has_building = building_eternal_palace
					"
					toggle = @has_eternal_empire
				}
			}
		}
	}
}

# AOT/Twinks/galacot/Eternals
has_stellarite_capital = {
	if = {
		limit = { owner = { is_hive_empire = yes } }
		custom_tooltip = {
			inline_script = {
				script = merger_of_rules/toggled_code
				code = "
					fail_text = requires_building_stellarite_capital_hive
				"
				toggle = @has_ancient_caches
			}
			OR = {
				has_building = building_imperial_hive_capital
				# ACOT SBTG
				has_sbtg_upgraded_capital = yes
				# AOT
				inline_script = {
					script = merger_of_rules/toggled_code
					code = "
						has_building = building_stellarite_hive_cluster
					"
					toggle = @has_acquisition_of_tech
				}
				# EDA
				inline_script = {
					script = merger_of_rules/toggled_code
					code = "
						has_building = eda_building_imperial_capital
					"
					toggle = @eda_mod
				}
				# GALACOT
				has_building = building_stellarite_galactic_hive_capital
			}
		}
	}
	else_if = {
		limit = { owner = { is_machine_empire = yes } }
		custom_tooltip = {
			inline_script = {
				script = merger_of_rules/toggled_code
				code = "
					fail_text = requires_building_stellarite_capital_machine
				"
				toggle = @has_ancient_caches
			}
			OR = {
				# ACOT
				has_building = building_imperial_machine_capital
				inline_script = {
					script = merger_of_rules/toggled_code
					code = "
						has_building = building_phanon_tower
					"
					toggle = @has_ancient_caches
				}
				# ACOT SBTG
				has_sbtg_upgraded_capital = yes
				# AOT
				inline_script = {
					script = merger_of_rules/toggled_code
					code = "
						has_building = building_stellarite_control_center
					"
					toggle = @has_acquisition_of_tech
				}
				# EDA
				inline_script = {
					script = merger_of_rules/toggled_code
					code = "
						has_building = eda_building_imperial_capital
					"
					toggle = @eda_mod
				}
				# GALACOT
				has_building = building_stellarite_galactic_machine_capital
			}
		}
	}
	else = {
		custom_tooltip = {
			inline_script = {
				script = merger_of_rules/toggled_code
				code = "
					fail_text = requires_building_stellarite_capital
				"
				toggle = @has_ancient_caches
			}
			OR = {
				# ACOT
				has_building = building_imperial_capital
				inline_script = {
					script = merger_of_rules/toggled_code
					code = "
						has_building = building_phanon_tower
					"
					toggle = @has_ancient_caches
				}
				# ACOT SBTG
				has_sbtg_upgraded_capital = yes
				# AOT
				inline_script = {
					script = merger_of_rules/toggled_code
					code = "
						has_building = building_stellarite_palace
					"
					toggle = @has_acquisition_of_tech
				}
				# EDA
				inline_script = {
					script = merger_of_rules/toggled_code
					code = "
						has_building = eda_building_imperial_capital
					"
					toggle = @eda_mod
				}
				# GALACOT
				has_building = building_stellarite_galactic_capital
				has_building = building_stellarite_galactic_hive_capital
				has_building = building_stellarite_galactic_machine_capital
			}
		}
	}
}

uses_district_industrial = {
	OR = {
		uses_district_set = standard
		uses_district_set = hive_world
		uses_district_set = machine_world
		uses_district_set = shattered_ring_world
		# Gigastructures
		inline_script = {
			script = merger_of_rules/toggled_code
			code = "
				giga_uses_industrial_district = yes
			"
			toggle = @has_gigastructures
		}
		# All That Is GRIMDARK
		uses_grimdark_infected_world_district = yes
	}
}

# ACOT/AOT/Twinks mods merging.
has_fort = {
	custom_tooltip = {
		fail_text = acot_requires_fort_building
		OR = {
			has_building = building_stronghold
			has_building = building_fortress
			has_building = building_fe_stronghold
			# ACOT
			inline_script = {
				script = merger_of_rules/toggled_code
				code = "
					has_building = building_acot_dm_stronghold
					has_building = building_acot_ae_stronghold
					has_building = building_acot_giga_fortress
					has_building = building_acot_giga_fortress_array
					has_building = building_acot_giga_fortress_lab
					has_building = building_acot_giga_fortress_obelisk
					has_building = building_fe_giga_fortress
					has_district = district_acot_enigmapolis_fortress
				"
				toggle = @has_ancient_caches
			}
			# GPM
			inline_script = {
				script = merger_of_rules/toggled_code
				code = "
					has_building = gpm_building_stronghold
				"
				toggle = @has_guillis_planet_modifiers
			}
			# Plentiful Traditions
			has_building = building_zitadom
		}
	}
}

has_advanced_fort = {
	custom_tooltip = {
		fail_text = acot_requires_fort_building
		OR = {
			has_building = building_fe_stronghold
			# ACOT
			inline_script = {
				script = merger_of_rules/toggled_code
				code = "
					has_building = building_acot_dm_stronghold
					has_building = building_acot_ae_stronghold
					has_building = building_acot_giga_fortress
					has_building = building_acot_giga_fortress_array
					has_building = building_acot_giga_fortress_lab
					has_building = building_acot_giga_fortress_obelisk
					has_building = building_fe_giga_fortress
					has_district = district_acot_enigmapolis_fortress
				"
				toggle = @has_ancient_caches
			}
			# AOT
			inline_script = {
				script = merger_of_rules/toggled_code
				code = "
					has_building = building_stellarite_machine_dome
					has_building = building_phanon_machine_dome
					has_building = building_acot_ae_hive_evochamber
					has_building = building_stellarite_hive_evochamber
					has_building = building_phanon_hive_evochamber
					has_building = building_stellarite_stronghold
					has_building = building_phanon_stronghold
					has_building = building_stellarite_giga_fortress_array
					has_building = building_stellarite_giga_fortress_lab
					has_building = building_stellarite_giga_fortress_obelisk
					has_building = building_phanon_giga_fortress_array
					has_building = building_phanon_giga_fortress_lab
					has_building = building_phanon_giga_fortress_obelisk
					has_district = district_acot_enigmapolis_fortress
					is_aot_macripp = yes
				"
				toggle = @has_acquisition_of_tech
			}
			# SOTS
			inline_script = {
				script = merger_of_rules/toggled_code
				code = "
					has_district = district_acot_soulsphere_fortress
				"
				toggle = @has_sots_mod
			}
			# Ad Astra Technology Mod
			has_building = building_fortress_city
			has_building = building_planetary_citadel
			has_building = building_aegis_city
			has_building = building_panopticon_fortress
			has_building = building_wyrmguard_citadel
			has_building = building_alpha_fortress
			has_building = building_occulari_tower
			# Ancient Empire
			inline_script = {
				script = merger_of_rules/toggled_code
				code = "
					has_building = ag_ancient_fortress
					has_building = ag_ancient_fortress_corp
					has_building = ag_ancient_fortress_overlord
				"
				toggle = @ag_null_edict_length
			}
			# EDA
			inline_script = {
				script = merger_of_rules/toggled_code
				code = "
						has_building = eda_building_imperial_capital
					"
				toggle = @eda_mod
			}
			# Twinks Mods
			has_building = building_precinct_house_at_b
			has_building = building_tw_arcane_hold
			has_building = building_nightelf_palace
			has_building = building_ancient_palace_at
			# Secrets of the Shroud
			inline_script = {
				script = merger_of_rules/toggled_code
				code = "
					has_district = district_acot_soulsphere_fortress
				"
				toggle = @has_sots_mod
			}
			# Wula Fallen Empire
			inline_script = {
				script = merger_of_rules/toggled_code
				code = "
					has_building = building_wula_stronghold
				"
				toggle = @wula_compatch_var
			}
		}
	}
}
