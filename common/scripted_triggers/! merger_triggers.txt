# Merger of Rules scripted triggers
# These triggers are also meant as a library for modders who want to reuse them in their own mods.

merg_is_standard_empire = {
	OR = {
		is_country_type = default
		is_country_type = fallen_empire
		is_country_type = awakened_fallen_empire
		# ZOFE
		AND = {
			has_global_flag = zofe_activated
			OR = {
				is_country_type = ascended_empire
				is_country_type = lost_empire
			}
		}
		# The Empty Vagrant
		AND = {
			has_global_flag = enable_empty_vagrant_mod
			OR = {
				is_country_type = default_ev
				is_country_type = fallen_empire_ev
				is_country_type = awakened_fallen_empire_ev
			}
		}
		# Human Fallen Empire
		AND = {
			has_global_flag = hfe_installed
			OR = {
				is_country_type = human_fallen_empire
				is_country_type = hfe_pirate
			}
		}
	}
}

# Expanded version of country_type = default
# Also replacing is_zofe_compatible so I don't have to check for a global flag
merg_is_default_empire = {
	OR = {
		is_country_type = default
		# ZOFE
		AND = {
			has_global_flag = zofe_activated
			OR = {
				is_country_type = ascended_empire
				is_country_type = lost_empire
			}
		}
		# The Empty Vagrant
		AND = {
			has_global_flag = enable_empty_vagrant_mod
			is_country_type = default_ev
		}
	}
}

# List of dormant/standard Fallen Empires
merg_is_fallen_empire = {
	OR = {
		is_country_type = fallen_empire
		# ZOFE
		AND = {
			has_global_flag = zofe_activated
			is_country_type = lost_empire
		}
		# The Empty Vagrant
		AND = {
			has_global_flag = enable_empty_vagrant_mod
			is_country_type = fallen_empire_ev
		}
		# SW:KUAT ANCIENT EMPIRE
		AND = {
			has_global_flag = install_kuat_mod
			is_country_type = kuat_fallen_empire
		}
		# Human Fallen Empire
		AND = {
			has_global_flag = hfe_installed
			is_country_type = human_fallen_empire
			NOT = { has_civic = hfe_civic_egypt_fury }
		}
	}
}

# List of awakened Fallen Empires
merg_is_awakened_fe = {
	OR = {
		is_country_type = awakened_fallen_empire
		# SW:KUAT ANCIENT EMPIRE
		AND = {
			has_global_flag = install_kuat_mod
			OR = {
				is_country_type = kuat_awakened_fallen_empire
				is_country_type = awakened_return_kuat_empire
			}
		}
		# A Deadly Tempest
		AND = {
			has_global_flag = a_deadly_tempest_mod_active
			is_country_type = awakened_gate_builders
		}
		# ZOFE
		AND = {
			has_global_flag = zofe_activated
			is_country_type = ascended_empire
		}
		# Human Fallen Empire
		AND = {
			has_global_flag = hfe_installed
			is_country_type = human_fallen_empire
			has_civic = hfe_civic_egypt_fury
		}
	}
}

# If I forget that this is not a thing, then it will be a thing anyway
merg_is_regular_empire = {
	is_regular_empire = yes
}

# Used by Planet Killers to forbid them to destroy invalid targets
merg_is_forbidden_target = {
	OR = {
		# Merger of Rules
		has_planet_flag = merg_forbidden_target # add this to your planet to dynamically exclude it.
		merg_is_dense_star = yes
		merg_is_empty_space = yes
		# MEM
		is_planet_class = pc_mem_synthetic_sun
		# APSR
		is_planet_class = pc_apsr_ancient
		is_planet_class = pc_apsr_unique
	}
}

# List of dense stars for can_destroy_planet_with_PLANET_KILLER_Ark_CRACKER
merg_is_dense_star = {
	OR = {
		is_planet_class = pc_black_hole
		is_planet_class = pc_neutron_star
		is_planet_class = pc_pulsar
		# Gigastructural Engineering & More
		is_planet_class = pc_birch
		is_planet_class = pc_core_black_hole
		is_planet_class = pc_core_quasar
		is_planet_class = pc_black_hole_giga
		is_planet_class = pc_ehof_black_hole
		is_planet_class = pc_pouchkinn_black_hole
		is_planet_class = pc_whc_star
		is_planet_class = pc_wh_star
		is_planet_class = pc_whdyson_star
		# Hypothetical Stars
		is_planet_class = pc_white_hole
		is_planet_class = pc_strange_star
		# Real Space
		is_planet_class = pc_collapsar
		is_planet_class = pc_magnetar
		is_planet_class = pc_microquasar_1
		is_planet_class = pc_microquasar_2
		# MEM
		is_planet_class = pc_mem_micro_black_hole
	}
}

merg_is_empty_space = {
	OR = {
		# Gigastructural Engineering & More
		is_planet_class = giga_hidden
		# Ancient Empires
		is_planet_class = pc_ag_void_star
		is_planet_class = pc_ag_void_planet
		# ACOT
		is_planet_class = pc_invisible_star
		# History of the Lost Empire
		is_planet_class = pc_empty_space
		# Some Events of Outside Cluster
		is_planet_class = pc_star_void_dummy_01
		# Not updated yet, keeping it for later
		# Wild Space
		# is_planet_class = pc_dn_star
		# is_planet_class = pc_WS_barycenter
	}
}

# List of planetary shield buildings
# merg_has_planetary_shield = {
# 	OR = {
#     	has_building = building_planetary_shield_generator
# 		# MEM
# 		has_building = building_mem_planetary_shield_generator
# 		has_building = building_mem_planetary_shield_generator_heavy
# 		has_building = building_mem_planetary_shield_generator_orila
# 		# ACOT
# 		has_building = building_dark_energy_psg
# 		has_building = building_ae_dark_energy_psg
# 		# AOT
# 		has_building = building_stellarite_psg
# 	}
# }

# Detection of Ethics and Civics Classic
is_ethics_classic = {
	AND = {
		has_global_flag = cultural_overhaul_active
  		NOR = {
    		has_global_flag = bugbranch_global_flag
    		has_global_flag = cultural_overhaul_redux_active
			has_global_flag = ideological_revolution
  		}
	}
}

# List of ideal ringworlds
# For use with Ascension - Biological Module
# merg_is_ideal_ringworld = {
#	OR = {
# 	is_planet_class = pc_ringworld_habitable
# 	# Gigastructural Engineering & More
# 	is_planet_class = pc_gigaorbital_ring
# 	is_planet_class = pc_interstellar_ringworld_habitable
# 	is_planet_class = pc_ringworld_city
# 	is_planet_class = pc_squareworld_habitable
# 	is_planet_class = pc_giga_penrose_habitable
# 	# Ancient Empire
# 	# listed planet types are for colors only, they're all ideal
# 	is_planet_class = pc_ag_ringworld_desert
# 	is_planet_class = pc_ag_ringworld_arid
# 	is_planet_class = pc_ag_ringworld_savannah
# 	is_planet_class = pc_ag_ringworld_ocean
# 	is_planet_class = pc_ag_ringworld_continental
# 	is_planet_class = pc_ag_ringworld_tropical
# 	is_planet_class = pc_ag_ringworld_tundra
# 	is_planet_class = pc_ag_ringworld_arctic
# 	is_planet_class = pc_ag_ringworld_alpine
# 	is_planet_class = pc_ag_ringworld_machine
# 	is_planet_class = pc_ag_ringworld_city
# 	is_planet_class = pc_ag_ringworld_gaia
#	}
# }

# List of all habitable ringworld sections
merg_is_hab_ringworld = {
	OR = {
	is_planet_class = pc_ringworld_habitable
	# Gigastructural Engineering & More
	is_planet_class = pc_gigaorbital_ring
	is_planet_class = pc_interstellar_ringworld_habitable
	is_planet_class = pc_ringworld_city
	is_planet_class = pc_squareworld_habitable
	is_planet_class = pc_giga_penrose_habitable
	is_planet_class = pc_ringworld_machine
	is_planet_class = pc_ringworld_hive
	# Ancient Empire
	# listed planet types are for colors only, they're all ideal
	is_planet_class = pc_ag_ringworld_desert
	is_planet_class = pc_ag_ringworld_arid
	is_planet_class = pc_ag_ringworld_savannah
	is_planet_class = pc_ag_ringworld_ocean
	is_planet_class = pc_ag_ringworld_continental
	is_planet_class = pc_ag_ringworld_tropical
	is_planet_class = pc_ag_ringworld_tundra
	is_planet_class = pc_ag_ringworld_arctic
	is_planet_class = pc_ag_ringworld_alpine
	is_planet_class = pc_ag_ringworld_machine
	is_planet_class = pc_ag_ringworld_city
	is_planet_class = pc_ag_ringworld_gaia
	# Giga Diversity - these don't exist yet
	# is_planet_class = pc_ringworld_necrocity
	# is_planet_class = pc_ringworld_milarc
	# is_planet_class = pc_ringworld_ecocity
	# is_planet_class = pc_ringworld_bioforge
	# is_planet_class = pc_ringworld_biofort
	# is_planet_class = pc_ringworld_machine_factory
	# is_planet_class = pc_ringworld_machine_fort
	# is_planet_class = pc_ringworld_relic
	# is_planet_class = pc_ringworld_milarc_relic
	# is_planet_class = pc_shroudring
	# is_planet_class = pc_aquaticring
	# is_planet_class = pc_ringworld_methanecity
	# is_planet_class = pc_ringworld_ammoniacity
	# is_planet_class = pc_ringworld_ashcity
	# is_planet_class = pc_ringworld_sulfurcity
	# is_planet_class = pc_ringworld_aquaticcity
	# is_planet_class = pc_ringworld_shroudcity
	}
}
