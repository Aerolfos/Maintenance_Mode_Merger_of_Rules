# Scripted triggers from mods, expanded to acknowledge other mods.

# Making Shadowgate acknowledge mod-made Fallen Empires
shadowgate_is_fe = {
    merg_is_fallen_empire = yes
}

# Making Shadowgate acknowledge mod-made Awakened Empires
shadowgate_is_ae = {
    merg_is_awakened_fe = yes
}

# Making Shadowgate acknowledge Underground Realms
shadowgate_is_purifier = {
    OR = {
        has_country_flag = shadowgate_ap_restricted
        has_valid_civic = civic_fanatic_purifiers
        has_valid_civic = civic_machine_terminator
        has_valid_civic = civic_hive_devouring_swarm
		# Underground Realms
		has_country_flag = dark_side
    }
}

# Making Shadowgate acknowledge Starbase Ships.
shadowgate_is_military_fleet = {
    OR = {
        has_fleet_flag = shadowgate_military_fleet
        any_owned_ship = {
			OR = {
				is_ship_class = shipclass_military
				is_ship_class = shipclass_military_special
				is_ship_class = shipclass_transport
				is_ship_size = juggernaut
				# Gigastructural Engineering & More
				is_ship_size = giga_systemcraft
				# AOT
				is_ship_size = ascended_juggernaut
				is_ship_size = precursor_juggernaut
				# ACOT
				is_ship_size = precursor_colossus
			}
		}
    }
}

# Expanding a bit the country list of Gigastructural Engineering & More
ehof_default_country = {
	OR = {
		is_country_type = default
		is_country_type = fallen_empire
		is_country_type = awakened_fallen_empire
		# ZOFE
		AND = {
			has_global_flag = zofe_activated
			OR = {
				is_country_type = ascended_empire
				is_country_type = lost_empire
			}
		}
		# The Empty Vagrant
		AND = {
			has_global_flag = enable_empty_vagrant_mod
			is_country_type = default_ev
		}
	}
}

# ACOT/AOT/Twinks mods merging.
has_advanced_fort = {
	OR = {
		# ACOT
		has_building = building_dm_stronghold
		has_building = building_fe_stronghold
		has_building = building_ae_stronghold
		# AOT
		has_building = building_stellarite_stronghold
		# Twinks Mods
		has_building = building_precinct_house_at_b
		has_building = building_tw_arcane_hold
		# has_building = building_demon_fortress # For later
	}
}

# Overwriting this for other mods to use my trigger instead.
is_zofe_compatible = {
	merg_is_default_empire = yes
}

# Overwriting to give support to other ringworlds
giga_habitable_structure = {
	OR = {
		is_planet_class = pc_ringworld_habitable
		is_planet_class = pc_habitat
		is_planet_class = pc_gigaorbital_ring
		is_planet_class = pc_habitable_gas_giant
		is_planet_class = pc_interstellar_habitat
		is_planet_class = pc_interstellar_ringworld_habitable
		is_planet_class = pc_giga_penrose_habitable
		is_planet_class = pc_ringworld_city
		is_planet_class = pc_ringworld_machine
		is_planet_class = pc_ringworld_hive
		is_planet_class = pc_equatorial_shipyard
		is_planet_class = pc_birch
		is_planet_class = pc_squareworld_habitable
		is_planet_class = pc_virtual_reality
		is_planet_class = pc_virtual_industry
		is_planet_class = pc_virtual_stellar_industry
		is_planet_class = pc_alderson_slice_gaia
		is_planet_class = pc_alderson_slice_pc
		is_planet_class = pc_alderson_slice_ecu
		is_planet_class = pc_alderson_slice_hive
		is_planet_class = pc_alderson_slice_machine
		is_planet_class = pc_pouchkinn_black_hole
		is_planet_class = pc_flat_world
 		# Ancient Empire
 		# listed planet types are for colors only, they're all ideal
		is_planet_class = pc_ag_ringworld_desert
		is_planet_class = pc_ag_ringworld_arid
		is_planet_class = pc_ag_ringworld_savannah
		is_planet_class = pc_ag_ringworld_ocean
		is_planet_class = pc_ag_ringworld_continental
		is_planet_class = pc_ag_ringworld_tropical
		is_planet_class = pc_ag_ringworld_tundra
		is_planet_class = pc_ag_ringworld_arctic
		is_planet_class = pc_ag_ringworld_alpine
		is_planet_class = pc_ag_ringworld_machine
		is_planet_class = pc_ag_ringworld_city
		is_planet_class = pc_ag_ringworld_gaia
 		# Giga Diversity - these don't exist yet
		# is_planet_class = pc_ringworld_necrocity
		# is_planet_class = pc_ringworld_milarc
		# is_planet_class = pc_ringworld_ecocity
		# is_planet_class = pc_ringworld_bioforge
		# is_planet_class = pc_ringworld_biofort
		# is_planet_class = pc_ringworld_machine_factory
		# is_planet_class = pc_ringworld_machine_fort
		# is_planet_class = pc_ringworld_relic
		# is_planet_class = pc_ringworld_milarc_relic
		# is_planet_class = pc_shroudring
		# is_planet_class = pc_aquaticring
		# is_planet_class = pc_ringworld_methanecity
		# is_planet_class = pc_ringworld_ammoniacity
		# is_planet_class = pc_ringworld_ashcity
		# is_planet_class = pc_ringworld_sulfurcity
		# is_planet_class = pc_ringworld_aquaticcity
		# is_planet_class = pc_ringworld_shroudcity
	}
}

# Stellaris Evolved overwrites
tec_is_psionic_pop = {
	OR = {
		has_trait = trait_psionic
		has_trait = trait_latent_psionic
		# Ascension Enhancements
		has_trait = trait_psi_receptors
		has_trait = trait_psi_emitters
	}
}

tec_is_total_psionic_pop = {
	OR = {
		has_trait = trait_psionic
		# Ascension Enhancements
		has_trait = trait_psi_emitters
	}
}

tec_is_any_psionic_pop = {
	OR = {
		tec_is_psionic_pop = yes

		has_trait = trait_tec_hive_psionic_resonance
		has_trait = trait_tec_hive_psionic_entanglement

		has_trait = trait_tec_pure_psionic
	#	has_trait = trait_tec_pure_psionic_hive
	}
}

tec_is_default_country = {
	merg_is_default_empire = yes
}

tec_is_ringworld = {
	OR = {
		uses_district_set = ring_world
		# Gigastructural Engineering & More
		uses_district_set = penrose_ring
		uses_district_set = interstellar_ring
		# Ancient Empire
		uses_district_set = ag_ancient_ringworld
	}
}

# This trigger doesn't exists yet, it's just a concept for potential future use in GPM.
# It adds to is_megacorp all megacorp authorities that exist outside of the trigger as they use their own rules.
# expanded_is_megacorp = {
# 	OR = {
# 		is_megacorp = yes
# 		# Warship Girls R And MIST Species
# 		AND = {
# 			has_authority = auth_shenhai
# 			OR = {
# 				has_country_flag = pantsu_shop_origin
# 				has_civic = civic_sh_criminal_syndicate
# 			}
# 		}
# 		# Azur Lane Stellaris DLC
# 		has_authority = auth_azur_lane_0
# 		has_authority = auth_azur_lane_1
# 		has_authority = auth_azur_lane_2
# 		has_authority = auth_azur_lane_K
# 		# Stellaris Evolved
# 		AND = {
# 			has_global_flag = stellarisevolved
# 			OR = {
# 				AND = {
# 					is_hive_empire = yes
# 					tec_is_symbiotic_hivemind = yes
# 				}
# 				AND = {
# 					is_machine_empire = yes
# 					tec_is_symbiotic_machine = yes
# 				}
# 			}
# 		}
# 	}
# }
