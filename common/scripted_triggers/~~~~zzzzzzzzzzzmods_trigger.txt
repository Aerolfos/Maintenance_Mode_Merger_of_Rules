# Scripted triggers from mods, expanded to acknowledge other mods.

# Making Shadowgate acknowledge mod-made Fallen Empires
shadowgate_is_fe = {
    merg_is_fallen_empire = yes
}

# Making Shadowgate acknowledge mod-made Awakened Empires
shadowgate_is_ae = {
    merg_is_awakened_fe = yes
}

# Making Shadowgate acknowledge Underground Realms
shadowgate_is_purifier = {
    OR = {
        has_country_flag = shadowgate_ap_restricted
        has_valid_civic = civic_fanatic_purifiers
        has_valid_civic = civic_machine_terminator
        has_valid_civic = civic_hive_devouring_swarm
		# Underground Realms
		has_country_flag = dark_side
    }
}

# Making Shadowgate acknowledge Starbase Ships.
shadowgate_is_military_fleet = {
    OR = {
        has_fleet_flag = shadowgate_military_fleet
        any_owned_ship = {
			OR = {
				is_ship_class = shipclass_military
				is_ship_class = shipclass_military_special
				is_ship_class = shipclass_transport
				is_ship_size = juggernaut
				# Gigastructural Engineering & More
				is_ship_size = giga_systemcraft
				# AOT
				is_ship_size = ascended_juggernaut
				is_ship_size = precursor_juggernaut
				# ACOT
				is_ship_size = precursor_colossus
			}
		}
    }
}

# Expanding a bit the country list of Gigastructural Engineering & More
ehof_default_country = {
	OR = {
		is_country_type = default
		is_country_type = fallen_empire
		is_country_type = awakened_fallen_empire
		# ZOFE
		AND = {
			has_global_flag = zofe_activated
			OR = {
				is_country_type = ascended_empire
				is_country_type = lost_empire
			}
		}
		# The Empty Vagrant
		AND = {
			has_global_flag = enable_empty_vagrant_mod
			is_country_type = default_ev
		}
	}
}

# ACOT/AOT/Twinks mods merging.
has_advanced_fort = {
	OR = {
		# ACOT
		has_building = building_dm_stronghold
		has_building = building_fe_stronghold
		has_building = building_ae_stronghold
		# AOT
		has_building = building_stellarite_stronghold
		# Twinks Mods
		has_building = building_precinct_house_at_b
		has_building = building_tw_arcane_hold
		# has_building = building_demon_fortress # For later
	}
}

# Overwriting this for other mods to use my trigger instead.
is_zofe_compatible = {
	OR = {
		is_country_type = default
		# ZOFE
		AND = {
			has_global_flag = zofe_activated
			OR = {
				is_country_type = ascended_empire
				is_country_type = lost_empire
			}
		}
		# The Empty Vagrant
		AND = {
			has_global_flag = enable_empty_vagrant_mod
			is_country_type = default_ev
		}
	}
}

# Overwriting to give support to other ringworlds
# Switching to district sets to reduce its size
giga_habitable_structure = {
	OR = {
		uses_district_set = habitat
		is_ringworld = yes
		# Planetary Diversity
		uses_district_set = pdplanethab
		# Gigastructural Engineering & More
		uses_district_set = giga_planet
		uses_district_set = penrose_ring
		uses_district_set = interstellar_ring
		uses_district_set = giga_gas_giant_habitat
		uses_district_set = giga_birch
		uses_district_set = virtual_ring
		uses_district_set = virtual_ring_industry
		uses_district_set = acot_giga_void_sphere
		uses_district_set = giga_alderson
		is_planet_class = pc_pouchkinn_black_hole
		# For reference, unused
		# uses_district_set = maginot_world_districts

		# Ancient Empire
		uses_district_set = ag_ancient_ringworld

		# Starborn: Improved Voidtouched
		uses_district_set = starborn_start

		# Twinks Atlantean
		uses_district_set = skypalace

		# More Events Mod
		is_planet_class = pc_mem_vazuran_habitat

		# Acquisition of Technology
		uses_district_set = dm_habitat
		uses_district_set = ae_habitat
		uses_district_set = sigma_habitat

 		# Giga Diversity - these don't exist yet
	}
}

# AOT trigger disallowing shields to be shown
is_memeable_space_habitat = {
	OR = {
		uses_district_set = habitat
		habitable_structure = yes
		is_ringworld = yes
		# Planetary Diversity
		uses_district_set = pdplanethab
		# Gigastructural Engineering & More
		uses_district_set = giga_planet
		uses_district_set = penrose_ring
		uses_district_set = interstellar_ring
		uses_district_set = giga_gas_giant_habitat
		uses_district_set = giga_birch
		uses_district_set = virtual_ring
		uses_district_set = virtual_ring_industry
		uses_district_set = acot_giga_void_sphere
		uses_district_set = giga_alderson

		# Ancient Empire
		uses_district_set = ag_ancient_ringworld

		# Starborn: Improved Voidtouched
		uses_district_set = starborn_start

		# Twinks Atlantean
		uses_district_set = skypalace

		# More Events Mod
		is_planet_class = pc_mem_vazuran_habitat

		# Acquisition of Technology
		uses_district_set = dm_habitat
		uses_district_set = ae_habitat
		uses_district_set = sigma_habitat

 		# Giga Diversity - these don't exist yet
	}
}

# Doing the same for MEM shields
mem_is_spherical_world = {
	is_ringworld = no
	NOR = {
		uses_district_set = habitat
		habitable_structure = yes
		# Planetary Diversity
		uses_district_set = pdplanethab
		# Gigastructural Engineering & More
		uses_district_set = giga_planet
		uses_district_set = penrose_ring
		uses_district_set = interstellar_ring
		uses_district_set = giga_gas_giant_habitat
		uses_district_set = giga_birch
		uses_district_set = virtual_ring
		uses_district_set = virtual_ring_industry
		uses_district_set = acot_giga_void_sphere
		uses_district_set = giga_alderson

		# Ancient Empire
		uses_district_set = ag_ancient_ringworld

		# Starborn: Improved Voidtouched
		uses_district_set = starborn_start

		# Twinks Atlantean
		uses_district_set = skypalace

		# More Events Mod
		is_planet_class = pc_mem_vazuran_habitat

		# Acquisition of Technology
		uses_district_set = dm_habitat
		uses_district_set = ae_habitat
		uses_district_set = sigma_habitat

 		# Giga Diversity - these don't exist yet
	}
}
